{"version":3,"sources":["js/node_modules/browserify/node_modules/browser-pack/_prelude.js","public/js/index.js"],"names":[],"mappings":"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","file":"js/index.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class KickstarterGraph {\n  constructor(opts) {\n    this.config = opts;\n    this.database = new Firebase(opts.firebase);\n    this.data = [];\n    this.missingData = false;\n    \n    this.init(opts.view);\n  }\n  \n  init(view) {\n    this.database.once('value', event => {\n      this.data = event.val(); \n      this[view]();\n    });\n  }\n  \n  accumulativeTimeSeries() {\n    var el = this.config.el;\n    var size = d3.select(el).node().getBoundingClientRect();\n    var m = { top: 20, right: 20, bottom: 30, left: 50 };\n    var w = size.width - m.left - m.right;\n    var h = size.height - m.top - m.bottom;\n    var tooltipDateFormat = d3.time.format('%d %b %H:%M%p');\n    var data = [];\n    var pledgedArr = [];\n    var dateArr = [];\n    var missingData = [];\n    var x, y, xAxis, yAxis, line, svg;\n    var tooltip = d3.select('body')\n        .append('div')   \n        .attr('class', 'tooltip');\n    \n    function commaSeparateNumber(val) {\n      while (/(\\d+)(\\d{3})/.test(val.toString())) {\n        val = val.toString().replace(/(\\d+)(\\d{3})/, '$1'+','+'$2');\n      }\n      return val;\n    }\n    \n    for (let key in this.data) {\n      if (this.data.hasOwnProperty(key) && key !== 'overview') {\n        let date = new Date(key * 1000);          \n        let pledged = parseInt(this.data[key].pledged, 10);\n        \n        data.push({ date, pledged }); \n        \n        pledgedArr.push(pledged);\n        dateArr.push(parseInt(key, 10));\n      }\n    }\n    \n    if (this.data.overview.launched_at < d3.min(dateArr)) {\n      let date = new Date(this.data.overview.launched_at * 1000); \n      \n      missingData.push({ date, pledged: 0 });\n      missingData.push({ date: data[0].date, pledged: data[0].pledged });\n      \n      this.missingData = true;\n    }\n    \n    x = d3.time.scale()\n      .range([0, w]);\n\n    y = d3.scale.linear()\n      .range([h, 0]);\n\n    xAxis = d3.svg.axis()\n      .scale(x)\n      .orient('bottom')\n      .ticks(d3.time.days, 2);\n\n    yAxis = d3.svg.axis()\n      .scale(y)\n      .orient('left');\n\n    line = d3.svg.line()\n      .x(d => { return x(d.date); })\n      .y(d => { return y(d.pledged); });\n    \n    svg = d3.select(this.config.el).append('svg')\n      .attr('width', w + m.left + m.right)\n      .attr('height', h + m.top + m.bottom)\n      .append('g')\n        .attr('transform', `translate(${m.left}, ${m.top})`);\n    \n    if (this.missingData) {\n      y.domain([0, d3.max(pledgedArr)]); \n      x.domain([missingData[0].date, new Date(dateArr[dateArr.length - 1] * 1000)]);    \n    } else {\n      y.domain(d3.extent(data, d => { return d.pledged; }));\n      x.domain(d3.extent(data, d => { return d.date; })); \n    }    \n\n    svg.append('g')\n      .attr('class', 'x axis')\n      .attr('transform', `translate(0, ${h})`)\n      .call(xAxis);\n\n    svg.append('g')\n      .attr('class', 'y axis')\n      .call(yAxis)\n      .append('text')\n        .attr('transform', 'rotate(-90)')\n        .attr('y', 6)\n        .attr('dy', '.71em')\n        .style('text-anchor', 'end')\n        .text('Contributed ($)');\n\n    svg.append('path')\n      .datum(data)\n        .attr('class', 'line')\n        .attr('d', line);\n\n    svg.append('path')\n      .datum(missingData)\n        .style('stroke-dasharray', ('3'))\n        .attr('class', 'line')\n        .attr('d', line);\n\n    svg.selectAll('dot')    \n      .data(data)         \n      .enter()\n        .append('circle')   \n        .attr('class', 'dot')\n        .attr('r', 0)       \n        .attr('cy', d => { return y(d.pledged); })     \n        .attr('cx', d => { return x(d.date); })\n        .on('mouseover', function(d) {  \n          d3.select(this)\n            .transition()\n            .duration(200)\n            .style('r', 5);\n      \n          tooltip\n            .html(`\n              ${tooltipDateFormat(d.date)}<br/>\n              $${commaSeparateNumber(d.pledged)}\n            `)\n            .style('opacity', 1)\n            .style('pointer-events', 'all')\n            .style('left', `${x(d.date) - 75}px`)     \n            .style('top', `${y(d.pledged) - 2}px`);\n         })                  \n        .on('mouseout', function() {       \n          d3.select(this)\n            .transition()\n            .duration(200)\n            .style('r', 0);\n      \n          tooltip\n            .style('opacity', 0)\n            .style('pointer-events', 'none');\n        });\n  }\n}\n\nnew KickstarterGraph({\n  el: '.graph',\n  firebase: $('body').attr('data-firebase'),\n  view: 'accumulativeTimeSeries'\n});"]}